# Service Mesh

- 如何管理和控制服务间的通信
  - 服务注册/发现
  - 路由，流量转移
  - 弹性能（熔断、超时、重试）
  - 安全
  - 可观察性

- Service Mesh演进总结

  - 逻辑耦合（业务代码中添加网络控制逻辑）使得代码耦合重复难以维护
  - 公共库（公共库将网络管控的功能整合成一个单独的工具包）解决了耦合，提升了复杂性，语言绑定，应用侵入
  - 代理（开源组件独立代理模式）功能简陋
  - Sidecar
  - Service Mesh
  - Service Mesh v2增加控制平面

- Service Mesh 能力

  - 基础设施层用来解决**服务于服务之间的通讯**，它主要的功能是在云原生应用这种复杂的服务拓扑情况下**进行可靠地请求分发**，一般情况下它会实现为一组**轻量化的网络代理**，以Sidecar的形式部署在你的应用代码的旁边，并且**跟应用完全透明**。
  - Mservice Mesh 产品形态包括两部分：数据平面和控制平面。
  - 数据平面：由所有的Sidecar组合
  - 控制平台：用来进行总体的控制

- Service Mesh的主要功能：

  - 流量控制：路由

    - 路由：蓝绿部署、灰度发布、A/B测试、流量转移、超时重试、熔断、故障注入、流量镜像。

  - 策略：流量限制、黑白名单

  - 网络安全：授权以及身份认证

  - 可观测性：指标收集和展示、日志收集、分布式追踪。

- Service Mesh与Kubernetes之间的关系
  - Kubernetes：
    - 解决容器编排与调度问题
    - 管理应用的生命周期
    - 给予Service Mesh支持与帮助
  - Service Mesh：
    - 解决服务间网络通信问题
    - 本质上是管理服务通信
- Service Mesh 和 API 网关的异同点
  - 部署方式不同： API网关部署在应用边界，Service Mesh以Sidecar模式部署在应用旁边进行代管流量收发。
  - 功能不同：API网关是对内部API进行聚合和抽象方便外部调用，Service Mesh主要是对应用内部网络细节进行一个描述
- Service Mesh 技术标准：
  - UDPA： 统一数据平面API，为不同的数据平面提供一个统一的API方便无缝接入（Envoy,Lineerd）方便在不同数据平面之间迁移
  - SMI：Service Mesh Interface 
- 
